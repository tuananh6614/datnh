<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S∆° ƒë·ªì H·ªá th·ªëng B√£i ƒë·ªó xe th√¥ng minh</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #fff;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #00d4ff, #7b2cbf, #e94560);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            text-align: center;
            color: #a0a0a0;
            margin-bottom: 40px;
            font-size: 1.1rem;
        }

        .section {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .section h2 {
            color: #00d4ff;
            margin-bottom: 25px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section h2::before {
            content: '';
            width: 4px;
            height: 25px;
            background: linear-gradient(180deg, #00d4ff, #7b2cbf);
            border-radius: 2px;
        }

        .mermaid {
            background: rgba(255, 255, 255, 0.02);
            border-radius: 15px;
            padding: 20px;
            overflow-x: auto;
        }

        /* Architecture Cards */
        .arch-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .arch-card {
            background: linear-gradient(145deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .arch-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 212, 255, 0.2);
        }

        .arch-card.server {
            border-top: 3px solid #e94560;
        }

        .arch-card.desktop {
            border-top: 3px solid #00d4ff;
        }

        .arch-card.esp32 {
            border-top: 3px solid #7b2cbf;
        }

        .arch-card.cloud {
            border-top: 3px solid #ffc107;
        }

        .arch-card h3 {
            font-size: 1.2rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .arch-card .icon {
            font-size: 1.5rem;
        }

        .arch-card ul {
            list-style: none;
            padding-left: 0;
        }

        .arch-card li {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            color: #d0d0d0;
        }

        .arch-card li:last-child {
            border-bottom: none;
        }

        .arch-card li::before {
            content: '‚ñ∏';
            color: #00d4ff;
        }

        /* Flow diagram */
        .flow-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            padding: 20px 0;
        }

        .flow-step {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .flow-number {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #00d4ff, #7b2cbf);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .flow-content {
            flex: 1;
            background: rgba(255,255,255,0.05);
            padding: 15px 20px;
            border-radius: 10px;
            border-left: 3px solid #00d4ff;
        }

        .flow-content h4 {
            color: #00d4ff;
            margin-bottom: 5px;
        }

        .flow-content p {
            color: #a0a0a0;
            font-size: 0.9rem;
        }

        /* Tech stack */
        .tech-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .tech-item {
            background: rgba(255,255,255,0.05);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            transition: all 0.3s;
        }

        .tech-item:hover {
            background: rgba(255,255,255,0.1);
            transform: scale(1.05);
        }

        .tech-item .tech-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .tech-item .tech-name {
            font-weight: 600;
            color: #fff;
        }

        .tech-item .tech-desc {
            font-size: 0.8rem;
            color: #a0a0a0;
            margin-top: 5px;
        }

        /* Fee calculator */
        .fee-box {
            background: linear-gradient(135deg, rgba(0,212,255,0.1), rgba(123,44,191,0.1));
            border-radius: 15px;
            padding: 25px;
            text-align: center;
        }

        .fee-formula {
            font-size: 1.3rem;
            font-family: 'Courier New', monospace;
            background: rgba(0,0,0,0.3);
            padding: 15px 25px;
            border-radius: 10px;
            display: inline-block;
            margin: 20px 0;
        }

        .fee-examples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .fee-example {
            background: rgba(255,255,255,0.05);
            padding: 15px;
            border-radius: 10px;
        }

        .fee-example .time {
            color: #00d4ff;
            font-weight: 600;
        }

        .fee-example .amount {
            font-size: 1.3rem;
            color: #e94560;
            font-weight: 700;
        }

        /* MQTT Topics */
        .mqtt-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .mqtt-table th, .mqtt-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .mqtt-table th {
            background: rgba(0,212,255,0.1);
            color: #00d4ff;
            font-weight: 600;
        }

        .mqtt-table tr:hover {
            background: rgba(255,255,255,0.02);
        }

        .mqtt-table code {
            background: rgba(0,0,0,0.3);
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.85rem;
            color: #ffc107;
        }

        /* Connection arrows */
        .connection-diagram {
            position: relative;
            padding: 40px 0;
        }

        .layer {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
            margin-bottom: 50px;
            position: relative;
        }

        .layer::after {
            content: '';
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 25px;
            background: linear-gradient(180deg, #00d4ff, transparent);
        }

        .layer:last-child::after {
            display: none;
        }

        .node {
            background: linear-gradient(145deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
            padding: 20px 30px;
            border-radius: 15px;
            text-align: center;
            min-width: 180px;
            border: 1px solid rgba(255,255,255,0.1);
            position: relative;
        }

        .node.primary {
            border-color: #00d4ff;
            box-shadow: 0 0 20px rgba(0,212,255,0.3);
        }

        .node .node-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .node .node-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .node .node-desc {
            font-size: 0.8rem;
            color: #a0a0a0;
        }

        .layer-title {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            writing-mode: vertical-rl;
            text-orientation: mixed;
            color: #00d4ff;
            font-weight: 600;
            font-size: 0.9rem;
            letter-spacing: 2px;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8rem;
            }

            .section {
                padding: 20px;
            }

            .arch-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>H·ªÜ TH·ªêNG B√ÉI ƒê·ªñ XE TH√îNG MINH</h1>
        <p class="subtitle">Smart Parking Management System - ƒê·ªì √°n t·ªët nghi·ªáp</p>

        <!-- Section 1: Architecture Overview -->
        <div class="section">
            <h2>1. Ki·∫øn tr√∫c t·ªïng quan</h2>

            <div class="connection-diagram">
                <!-- Cloud Layer -->
                <div class="layer">
                    <span class="layer-title">CLOUD</span>
                    <div class="node">
                        <div class="node-icon">‚òÅÔ∏è</div>
                        <div class="node-title">Cloudflare Tunnel</div>
                        <div class="node-desc">Remote Access</div>
                    </div>
                    <div class="node">
                        <div class="node-icon">üí≥</div>
                        <div class="node-title">SePay API</div>
                        <div class="node-desc">Payment Gateway</div>
                    </div>
                    <div class="node">
                        <div class="node-icon">üì±</div>
                        <div class="node-title">VietQR</div>
                        <div class="node-desc">QR Generation</div>
                    </div>
                </div>

                <!-- Server Layer -->
                <div class="layer">
                    <span class="layer-title">SERVER</span>
                    <div class="node primary">
                        <div class="node-icon">üêß</div>
                        <div class="node-title">Linux Server</div>
                        <div class="node-desc">192.168.1.165</div>
                    </div>
                </div>

                <!-- Application Layer -->
                <div class="layer">
                    <span class="layer-title">APP</span>
                    <div class="node">
                        <div class="node-icon">üóÑÔ∏è</div>
                        <div class="node-title">PostgreSQL</div>
                        <div class="node-desc">Database</div>
                    </div>
                    <div class="node">
                        <div class="node-icon">üåê</div>
                        <div class="node-title">Flask Web</div>
                        <div class="node-desc">Port 5000</div>
                    </div>
                    <div class="node">
                        <div class="node-icon">üì°</div>
                        <div class="node-title">Mosquitto</div>
                        <div class="node-desc">MQTT Broker</div>
                    </div>
                    <div class="node">
                        <div class="node-icon">üñ•Ô∏è</div>
                        <div class="node-title">Desktop App</div>
                        <div class="node-desc">PySide6 + AI</div>
                    </div>
                </div>

                <!-- Hardware Layer -->
                <div class="layer">
                    <span class="layer-title">IoT</span>
                    <div class="node">
                        <div class="node-icon">üöß</div>
                        <div class="node-title">ESP32 Gate</div>
                        <div class="node-desc">RFID IN/OUT</div>
                    </div>
                    <div class="node">
                        <div class="node-icon">üí∞</div>
                        <div class="node-title">ESP32 Payment</div>
                        <div class="node-desc">RFID + LCD</div>
                    </div>
                    <div class="node">
                        <div class="node-icon">üì∑</div>
                        <div class="node-title">Camera</div>
                        <div class="node-desc">USB Webcam</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section 2: Component Details -->
        <div class="section">
            <h2>2. Chi ti·∫øt c√°c th√†nh ph·∫ßn</h2>

            <div class="arch-grid">
                <div class="arch-card server">
                    <h3><span class="icon">üêß</span> Linux Server</h3>
                    <ul>
                        <li>IP: 192.168.1.165</li>
                        <li>PostgreSQL - C∆° s·ªü d·ªØ li·ªáu</li>
                        <li>Mosquitto MQTT Broker</li>
                        <li>Flask Web Application</li>
                        <li>Cloudflared Tunnel</li>
                    </ul>
                </div>

                <div class="arch-card desktop">
                    <h3><span class="icon">üñ•Ô∏è</span> Desktop Application</h3>
                    <ul>
                        <li>PySide6 (Qt6) GUI Framework</li>
                        <li>YOLOv8 - Ph√°t hi·ªán bi·ªÉn s·ªë</li>
                        <li>EasyOCR - ƒê·ªçc k√Ω t·ª±</li>
                        <li>OpenCV - X·ª≠ l√Ω ·∫£nh</li>
                        <li>MQTT Client - Giao ti·∫øp IoT</li>
                        <li>VietQR - T·∫°o m√£ thanh to√°n</li>
                    </ul>
                </div>

                <div class="arch-card esp32">
                    <h3><span class="icon">üöß</span> ESP32 Gate (baidoxe)</h3>
                    <ul>
                        <li>Board: ESP32-S3</li>
                        <li>2x RFID RC522 (IN/OUT)</li>
                        <li>Gate ID: gate01</li>
                        <li>WiFi + MQTT Client</li>
                        <li>OTA Update Support</li>
                    </ul>
                </div>

                <div class="arch-card esp32">
                    <h3><span class="icon">üí∞</span> ESP32 Payment (thanhtoan)</h3>
                    <ul>
                        <li>Board: ESP32-S3</li>
                        <li>1x RFID RC522</li>
                        <li>TFT ST7735 LCD 128x160</li>
                        <li>Gate ID: gate02</li>
                        <li>State Machine UI</li>
                        <li>OTA Update Support</li>
                    </ul>
                </div>

                <div class="arch-card cloud">
                    <h3><span class="icon">üí≥</span> Payment System</h3>
                    <ul>
                        <li>SePay API Integration</li>
                        <li>VietQR Standard</li>
                        <li>VietinBank Support</li>
                        <li>Webhook Callback</li>
                        <li>Real-time Confirmation</li>
                    </ul>
                </div>

                <div class="arch-card cloud">
                    <h3><span class="icon">ü§ñ</span> AI/ML Module</h3>
                    <ul>
                        <li>YOLOv8n - Vehicle Detection</li>
                        <li>Custom License Plate Model</li>
                        <li>EasyOCR Engine</li>
                        <li>Multi-frame Voting</li>
                        <li>CUDA/CPU Support</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Section 3: Data Flow - Vehicle IN -->
        <div class="section">
            <h2>3. Lu·ªìng x·ª≠ l√Ω: Xe V√ÄO b√£i</h2>

            <div class="flow-container">
                <div class="flow-step">
                    <div class="flow-number">1</div>
                    <div class="flow-content">
                        <h4>Qu√©t th·∫ª RFID t·∫°i c·ªïng v√†o</h4>
                        <p>ESP32 baidoxe ƒë·ªçc th·∫ª RFID qua module RC522-A, l·∫•y card_uid</p>
                    </div>
                </div>

                <div class="flow-step">
                    <div class="flow-number">2</div>
                    <div class="flow-content">
                        <h4>G·ª≠i trigger qua MQTT</h4>
                        <p>Publish message ƒë·∫øn topic: <code>parking/gate/gate01/in</code> v·ªõi card_id</p>
                    </div>
                </div>

                <div class="flow-step">
                    <div class="flow-number">3</div>
                    <div class="flow-content">
                        <h4>Desktop App nh·∫≠n v√† ch·ª•p ·∫£nh</h4>
                        <p>Camera IN capture frame, l∆∞u v√†o buffer v·ªõi ƒë·ªô n√©t cao nh·∫•t</p>
                    </div>
                </div>

                <div class="flow-step">
                    <div class="flow-number">4</div>
                    <div class="flow-content">
                        <h4>YOLOv8 ph√°t hi·ªán bi·ªÉn s·ªë</h4>
                        <p>Model license_plate_detector.pt detect v√πng ch·ª©a bi·ªÉn s·ªë xe</p>
                    </div>
                </div>

                <div class="flow-step">
                    <div class="flow-number">5</div>
                    <div class="flow-content">
                        <h4>EasyOCR ƒë·ªçc k√Ω t·ª±</h4>
                        <p>Crop, enhance, warp perspective v√† OCR ƒë·ªÉ ƒë·ªçc text bi·ªÉn s·ªë</p>
                    </div>
                </div>

                <div class="flow-step">
                    <div class="flow-number">6</div>
                    <div class="flow-content">
                        <h4>L∆∞u v√†o Database</h4>
                        <p>INSERT parking_session v·ªõi card_id, plate_number, time_in, staff_id</p>
                    </div>
                </div>

                <div class="flow-step">
                    <div class="flow-number">7</div>
                    <div class="flow-content">
                        <h4>M·ªü barrier cho xe v√†o</h4>
                        <p>G·ª≠i t√≠n hi·ªáu ƒëi·ªÅu khi·ªÉn barrier (n·∫øu c√≥) ho·∫∑c hi·ªÉn th·ªã th√¥ng b√°o</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section 4: Data Flow - Vehicle OUT -->
        <div class="section">
            <h2>4. Lu·ªìng x·ª≠ l√Ω: Xe RA + Thanh to√°n</h2>

            <div class="flow-container">
                <div class="flow-step">
                    <div class="flow-number">1</div>
                    <div class="flow-content">
                        <h4>Qu√©t th·∫ª RFID t·∫°i c·ªïng ra</h4>
                        <p>ESP32 baidoxe ƒë·ªçc th·∫ª qua RC522-B, publish ƒë·∫øn <code>parking/gate/gate01/out</code></p>
                    </div>
                </div>

                <div class="flow-step">
                    <div class="flow-number">2</div>
                    <div class="flow-content">
                        <h4>Query th√¥ng tin t·ª´ Database</h4>
                        <p>T√¨m parking_session theo card_id, t√≠nh time_out v√† ph√≠ g·ª≠i xe</p>
                    </div>
                </div>

                <div class="flow-step">
                    <div class="flow-number">3</div>
                    <div class="flow-content">
                        <h4>T·∫°o m√£ QR thanh to√°n</h4>
                        <p>G·ªçi VietQR API (img.vietqr.io) t·∫°o QR v·ªõi s·ªë ti·ªÅn v√† n·ªôi dung chuy·ªÉn kho·∫£n</p>
                    </div>
                </div>

                <div class="flow-step">
                    <div class="flow-number">4</div>
                    <div class="flow-content">
                        <h4>Hi·ªÉn th·ªã QR tr√™n Desktop App</h4>
                        <p>QRPaymentWidget popup v·ªõi th√¥ng tin xe, s·ªë ti·ªÅn v√† m√£ QR ƒë·ªÉ kh√°ch qu√©t</p>
                    </div>
                </div>

                <div class="flow-step">
                    <div class="flow-number">5</div>
                    <div class="flow-content">
                        <h4>Kh√°ch chuy·ªÉn kho·∫£n qua Banking App</h4>
                        <p>Qu√©t m√£ VietQR b·∫±ng app ng√¢n h√†ng, x√°c nh·∫≠n chuy·ªÉn ti·ªÅn</p>
                    </div>
                </div>

                <div class="flow-step">
                    <div class="flow-number">6</div>
                    <div class="flow-content">
                        <h4>SePay Webhook x√°c nh·∫≠n</h4>
                        <p>SePay g·ª≠i callback khi nh·∫≠n ti·ªÅn, server publish <code>payment_confirmed</code></p>
                    </div>
                </div>

                <div class="flow-step">
                    <div class="flow-number">7</div>
                    <div class="flow-content">
                        <h4>C·∫≠p nh·∫≠t Database & M·ªü barrier</h4>
                        <p>UPDATE payment_status = 'paid', hi·ªÉn th·ªã "Thanh to√°n th√†nh c√¥ng", m·ªü c·ªïng</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section 5: MQTT Topics -->
        <div class="section">
            <h2>5. MQTT Topics</h2>

            <table class="mqtt-table">
                <thead>
                    <tr>
                        <th>Topic</th>
                        <th>Publisher</th>
                        <th>Subscriber</th>
                        <th>M√¥ t·∫£</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>parking/gate/gate01/in</code></td>
                        <td>ESP32 baidoxe</td>
                        <td>Desktop App</td>
                        <td>Trigger xe v√†o c·ªïng</td>
                    </tr>
                    <tr>
                        <td><code>parking/gate/gate01/out</code></td>
                        <td>ESP32 baidoxe</td>
                        <td>Desktop App, Web</td>
                        <td>Trigger xe ra c·ªïng</td>
                    </tr>
                    <tr>
                        <td><code>parking/gate/gate01/heartbeat</code></td>
                        <td>ESP32 baidoxe</td>
                        <td>Desktop App</td>
                        <td>Ki·ªÉm tra ESP32 online</td>
                    </tr>
                    <tr>
                        <td><code>parking/payment/gate02/card_scanned</code></td>
                        <td>ESP32 thanhtoan</td>
                        <td>Web App</td>
                        <td>Qu√©t th·∫ª t·∫°i tr·∫°m thanh to√°n</td>
                    </tr>
                    <tr>
                        <td><code>parking/payment/gate02/vehicle_info</code></td>
                        <td>Web App</td>
                        <td>ESP32 thanhtoan</td>
                        <td>Th√¥ng tin xe ƒë·ªÉ hi·ªÉn th·ªã LCD</td>
                    </tr>
                    <tr>
                        <td><code>parking/payment/gate02/qr_data</code></td>
                        <td>Web App</td>
                        <td>Desktop App</td>
                        <td>D·ªØ li·ªáu QR thanh to√°n</td>
                    </tr>
                    <tr>
                        <td><code>parking/payment/gate02/payment_confirmed</code></td>
                        <td>SePay Webhook</td>
                        <td>ESP32, Desktop</td>
                        <td>X√°c nh·∫≠n ƒë√£ thanh to√°n</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Section 6: Fee Calculation -->
        <div class="section">
            <h2>6. C√¥ng th·ª©c t√≠nh ph√≠ g·ª≠i xe</h2>

            <div class="fee-box">
                <h3 style="color: #00d4ff; margin-bottom: 15px;">Parking Fee Formula</h3>

                <div class="fee-formula">
                    PH√ç = 3,000 + floor(th·ªùi_gian / 60) √ó 5,000 VNƒê
                </div>

                <p style="color: #a0a0a0; margin-top: 15px;">
                    Ph√≠ c∆° b·∫£n: <strong style="color: #00d4ff;">3,000 VNƒê</strong> |
                    Ph√≠ tƒÉng th√™m: <strong style="color: #e94560;">5,000 VNƒê</strong> m·ªói 60 ph√∫t
                </p>

                <div class="fee-examples">
                    <div class="fee-example">
                        <div class="time">‚è±Ô∏è 30 ph√∫t</div>
                        <div class="amount">3,000 VNƒê</div>
                    </div>
                    <div class="fee-example">
                        <div class="time">‚è±Ô∏è 1 gi·ªù</div>
                        <div class="amount">8,000 VNƒê</div>
                    </div>
                    <div class="fee-example">
                        <div class="time">‚è±Ô∏è 2.5 gi·ªù</div>
                        <div class="amount">13,000 VNƒê</div>
                    </div>
                    <div class="fee-example">
                        <div class="time">‚è±Ô∏è 5 gi·ªù</div>
                        <div class="amount">28,000 VNƒê</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section 7: Technology Stack -->
        <div class="section">
            <h2>7. C√¥ng ngh·ªá s·ª≠ d·ª•ng</h2>

            <div class="tech-grid">
                <div class="tech-item">
                    <div class="tech-icon">üêç</div>
                    <div class="tech-name">Python</div>
                    <div class="tech-desc">Backend & AI</div>
                </div>
                <div class="tech-item">
                    <div class="tech-icon">üéØ</div>
                    <div class="tech-name">YOLOv8</div>
                    <div class="tech-desc">Object Detection</div>
                </div>
                <div class="tech-item">
                    <div class="tech-icon">üëÅÔ∏è</div>
                    <div class="tech-name">EasyOCR</div>
                    <div class="tech-desc">Text Recognition</div>
                </div>
                <div class="tech-item">
                    <div class="tech-icon">üì∏</div>
                    <div class="tech-name">OpenCV</div>
                    <div class="tech-desc">Image Processing</div>
                </div>
                <div class="tech-item">
                    <div class="tech-icon">üñºÔ∏è</div>
                    <div class="tech-name">PySide6</div>
                    <div class="tech-desc">Desktop GUI</div>
                </div>
                <div class="tech-item">
                    <div class="tech-icon">üå∂Ô∏è</div>
                    <div class="tech-name">Flask</div>
                    <div class="tech-desc">Web Framework</div>
                </div>
                <div class="tech-item">
                    <div class="tech-icon">üêò</div>
                    <div class="tech-name">PostgreSQL</div>
                    <div class="tech-desc">Database</div>
                </div>
                <div class="tech-item">
                    <div class="tech-icon">üì°</div>
                    <div class="tech-name">MQTT</div>
                    <div class="tech-desc">IoT Protocol</div>
                </div>
                <div class="tech-item">
                    <div class="tech-icon">‚ö°</div>
                    <div class="tech-name">ESP32-S3</div>
                    <div class="tech-desc">Microcontroller</div>
                </div>
                <div class="tech-item">
                    <div class="tech-icon">üí≥</div>
                    <div class="tech-name">RFID RC522</div>
                    <div class="tech-desc">Card Reader</div>
                </div>
                <div class="tech-item">
                    <div class="tech-icon">üì∫</div>
                    <div class="tech-name">ST7735 TFT</div>
                    <div class="tech-desc">LCD Display</div>
                </div>
                <div class="tech-item">
                    <div class="tech-icon">üì±</div>
                    <div class="tech-name">VietQR</div>
                    <div class="tech-desc">Payment QR</div>
                </div>
            </div>
        </div>

        <!-- Section 8: Database Schema -->
        <div class="section">
            <h2>8. Database Schema (ERD)</h2>

            <div class="mermaid">
erDiagram
    users ||--o{ staff_sessions : "has"
    users ||--o{ parking_sessions : "manages"
    cards ||--o{ parking_sessions : "used_in"

    users {
        int user_id PK
        string username
        string password_hash
        string full_name
        string role
        boolean is_active
    }

    cards {
        string card_id PK
        string card_uid
        string owner_name
        string vehicle_type
        boolean is_monthly
        date expiry_date
        boolean is_active
    }

    parking_sessions {
        int session_id PK
        string card_id FK
        int staff_id FK
        string plate_number
        timestamp time_in
        timestamp time_out
        int fee
        string payment_status
        string payment_method
        timestamp created_at
    }

    staff_sessions {
        int session_id PK
        int user_id FK
        timestamp login_time
        timestamp logout_time
        timestamp last_heartbeat
        string device_name
        boolean is_active
    }
            </div>
        </div>

        <!-- Footer -->
        <div style="text-align: center; padding: 40px 0; color: #666;">
            <p>Smart Parking Management System</p>
            <p style="font-size: 0.9rem;">ƒê·ªì √°n t·ªët nghi·ªáp - 2024</p>
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'dark',
            themeVariables: {
                primaryColor: '#00d4ff',
                primaryTextColor: '#fff',
                primaryBorderColor: '#00d4ff',
                lineColor: '#00d4ff',
                secondaryColor: '#7b2cbf',
                tertiaryColor: '#1a1a2e'
            }
        });
    </script>
</body>
</html>
